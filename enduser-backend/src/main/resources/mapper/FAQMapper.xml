<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.app.faq.mapper.FAQMapper">

    <!-- =========================
         USER FAQ 목록 조회
         - COMMUNITY_POST 단일 테이블
         - post_type = 'FAQ'
         - is_visible = true
         ========================= -->
    <select id="selectUserFaqList"
            resultType="com.project.app.faq.dto.FAQDto">

        SELECT
            post_id     AS postId,
            post_type   AS postType,
            category    AS category,
            title       AS title,
            content     AS content,
            is_visible  AS isVisible,
            created_at  AS createdAt
        FROM COMMUNITY_POST
        WHERE post_type = 'FAQ'
          AND is_visible = true
        ORDER BY created_at DESC

    </select>

    <!-- =========================
         USER FAQ 상세 조회
         - 펼쳐진 상태에서 내용 표시용
         ========================= -->
    <select id="selectUserFaqDetail"
            resultType="com.project.app.faq.dto.FAQDto">

        SELECT
            post_id    AS postId,
            post_type  AS postType,
            category   AS category,
            title      AS title,
            content    AS content,
            is_visible AS isVisible,
            created_at AS createdAt
        FROM COMMUNITY_POST
        WHERE post_id = #{postId}
          AND post_type = 'FAQ'
          AND is_visible = true

    </select>

</mapper>
